<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Set an option for a cURL share handle</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.curl-share-init.html">« curl_share_init</a></li>
      <li style="float: right;"><a href="function.curl-share-strerror.html">curl_share_strerror »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.curl.html">cURL Functions</a></li>
    <li>Set an option for a cURL share handle</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.curl-share-setopt" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">curl_share_setopt</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.5.0, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">curl_share_setopt</span> &mdash; <span class="dc-title">Set an option for a cURL share handle</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.curl-share-setopt-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>curl_share_setopt</strong></span>(<span class="methodparam"><span class="type"><a href="class.curlsharehandle.html" class="type CurlShareHandle">CurlShareHandle</a></span> <code class="parameter">$share_handle</code></span>, <span class="methodparam"><span class="type">int</span> <code class="parameter">$option</code></span>, <span class="methodparam"><span class="type"><a href="language.types.declarations.html#language.types.declarations.mixed" class="type mixed">mixed</a></span> <code class="parameter">$value</code></span>): <span class="type">bool</span></div>

  <p class="para rdfs-comment">
   Sets an option on the given cURL share handle.
  </p>

 </div>


 <div class="refsect1 parameters" id="refsect1-function.curl-share-setopt-parameters">
  <h3 class="title">Parameters</h3>
  <dl>
   <dt>
<code class="parameter">share_handle</code>
</dt>
<dd>
<p class="para">A cURL share handle returned by
<span class="function"><a href="function.curl-share-init.html" class="function">curl_share_init()</a></span>.</p></dd>

   
    <dt>
<code class="parameter">option</code></dt>

    <dd>

     <p class="para">
      <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Option</th>
           <th>Description</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td style="vertical-align: top;"><strong><code>CURLSHOPT_SHARE</code></strong></td>
           <td style="vertical-align: top;">
               Specifies a type of data that should be shared.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURLSHOPT_UNSHARE</code></strong></td>
           <td style="vertical-align: top;">
               Specifies a type of data that will be no longer shared.
           </td>
          </tr>

         </tbody>
        
       </table>

     </p>
    </dd>

   
   
    <dt>
<code class="parameter">value</code></dt>

    <dd>

     <p class="para">
      <table class="doctable informaltable">
        
         <thead>
          <tr>
           <th>Value</th>
           <th>Description</th>
          </tr>

         </thead>

         <tbody class="tbody">
          <tr>
           <td style="vertical-align: top;"><strong><code>CURL_LOCK_DATA_COOKIE</code></strong></td>
           <td style="vertical-align: top;">
               Shares cookie data.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURL_LOCK_DATA_DNS</code></strong></td>
           <td style="vertical-align: top;">
               Shares DNS cache. Note that when you use cURL multi handles,
               all handles added to the same multi handle will share DNS cache
               by default.
           </td>
          </tr>

          <tr>
           <td style="vertical-align: top;"><strong><code>CURL_LOCK_DATA_SSL_SESSION</code></strong></td>
           <td style="vertical-align: top;">
               Shares SSL session IDs, reducing the time spent on the SSL
               handshake when reconnecting to the same server. Note that SSL
               session IDs are reused within the same handle by default.
           </td>
          </tr>

         </tbody>
        
       </table>

     </p>
    </dd>

   
  </dl>

 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.curl-share-setopt-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns <strong><code>true</code></strong> on success or <strong><code>false</code></strong> on failure.
  </p>
 </div>

 
 <div class="refsect1 changelog" id="refsect1-function.curl-share-setopt-changelog">
  <h3 class="title">Changelog</h3>
  <table class="doctable informaltable">
   
    <thead>
     <tr>
      <th>Version</th>
      <th>Description</th>
     </tr>

    </thead>

    <tbody class="tbody">
     <tr>
 <td>8.0.0</td>
 <td>
  <code class="parameter">share_handle</code> expects a <span class="classname"><a href="class.curlsharehandle.html" class="classname">CurlShareHandle</a></span>
  instance now; previously, a <span class="type">resource</span> was expected.
 </td>
</tr>

    </tbody>
   
  </table>

 </div>


 <div class="refsect1 examples" id="refsect1-function.curl-share-setopt-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-4304">
    <p><strong>Example #1 <span class="function"><strong>curl_share_setopt()</strong></span> example</strong></p>
    <div class="example-contents"><p>
     This example will create a cURL share handle, add two cURL handles to it,
     and then run them with cookie data sharing.
    </p></div>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">// Create cURL share handle and set it to share cookie data<br /></span><span style="color: #0000BB">$sh </span><span style="color: #007700">= </span><span style="color: #0000BB">curl_share_init</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">curl_share_setopt</span><span style="color: #007700">(</span><span style="color: #0000BB">$sh</span><span style="color: #007700">, </span><span style="color: #0000BB">CURLSHOPT_SHARE</span><span style="color: #007700">, </span><span style="color: #0000BB">CURL_LOCK_DATA_COOKIE</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Initialize the first cURL handle and assign the share handle to it<br /></span><span style="color: #0000BB">$ch1 </span><span style="color: #007700">= </span><span style="color: #0000BB">curl_init</span><span style="color: #007700">(</span><span style="color: #DD0000">"http://example.com/"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">curl_setopt</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch1</span><span style="color: #007700">, </span><span style="color: #0000BB">CURLOPT_SHARE</span><span style="color: #007700">, </span><span style="color: #0000BB">$sh</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Execute the first cURL handle<br /></span><span style="color: #0000BB">curl_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch1</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Initialize the second cURL handle and assign the share handle to it<br /></span><span style="color: #0000BB">$ch2 </span><span style="color: #007700">= </span><span style="color: #0000BB">curl_init</span><span style="color: #007700">(</span><span style="color: #DD0000">"http://php.net/"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">curl_setopt</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch2</span><span style="color: #007700">, </span><span style="color: #0000BB">CURLOPT_SHARE</span><span style="color: #007700">, </span><span style="color: #0000BB">$sh</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Execute the second cURL handle<br />//  all cookies from $ch1 handle are shared with $ch2 handle<br /></span><span style="color: #0000BB">curl_exec</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch2</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Close the cURL share handle<br /></span><span style="color: #0000BB">curl_share_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$sh</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">// Close the cURL handles<br /></span><span style="color: #0000BB">curl_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch1</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">curl_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$ch2</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


</div></div></div></body></html>