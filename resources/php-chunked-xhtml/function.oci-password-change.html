<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Changes password of Oracle's user</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.oci-parse.html">« oci_parse</a></li>
      <li style="float: right;"><a href="function.oci-pconnect.html">oci_pconnect »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.oci8.html">OCI8 Functions</a></li>
    <li>Changes password of Oracle's user</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.oci-password-change" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">oci_password_change</h1>
  <p class="verinfo">(PHP 5, PHP 7, PHP 8, PECL OCI8 &gt;= 1.1.0)</p><p class="refpurpose"><span class="refname">oci_password_change</span> &mdash; <span class="dc-title">Changes password of Oracle&#039;s user</span></p>

 </div>
 
 <div class="refsect1 description" id="refsect1-function.oci-password-change-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>oci_password_change</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">resource</span> <code class="parameter">$connection</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$old_password</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$new_password</code></span><br>): <span class="type">bool</span></div>

  <div class="methodsynopsis dc-description"><span class="methodname"><strong>oci_password_change</strong></span>(<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$database_name</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$username</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$old_password</code></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string</span> <code class="parameter">$new_password</code></span><br>): <span class="type">resource</span></div>

  <p class="para rdfs-comment">
   Changes password for user with <code class="parameter">username</code>.
  </p>
  <p class="para">
   The <span class="function"><strong>oci_password_change()</strong></span> function is most useful for PHP command-line scripts,
   or when non-persistent connections are used throughout the PHP application.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.oci-password-change-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">connection</code></dt>

     <dd>

      <p class="para">
       An Oracle connection identifier, returned by 
       <span class="function"><a href="function.oci-connect.html" class="function">oci_connect()</a></span> or <span class="function"><a href="function.oci-pconnect.html" class="function">oci_pconnect()</a></span>.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">username</code></dt>

     <dd>

      <p class="para">
       The Oracle user name.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">old_password</code></dt>

     <dd>

      <p class="para">
       The old password.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">new_password</code></dt>

     <dd>

      <p class="para">
       The new password to be set.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">database_name</code></dt>

     <dd>

      <p class="para">
       The database name.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.oci-password-change-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   When <code class="parameter">connection</code> is provided, <span class="function"><strong>oci_password_change()</strong></span> returns <strong><code>true</code></strong> on success,
    or <strong><code>false</code></strong> on failure When <code class="parameter">connection</code> is provided, <span class="function"><strong>oci_password_change()</strong></span> returns
   the connection resource on success, or <strong><code>false</code></strong> on failure
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.oci-password-change-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-1853">
    <p><strong>Example #1 <span class="function"><strong>oci_password_change()</strong></span> example changing the password of an already connected user</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$dbase&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost/orcl'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'cj'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$current_pw&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$new_pw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'geelong'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_pconnect</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$current_pw</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dbase</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">oci_password_change</span><span style="color: #007700">(</span><span style="color: #0000BB">$c</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$current_pw</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$new_pw</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"New&nbsp;password&nbsp;is&nbsp;:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$new_pw&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-1854">
    <p><strong>Example #2 <span class="function"><strong>oci_password_change()</strong></span> example of connecting and changing the password in one step</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$dbase&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'localhost/orcl'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$user&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'cj'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$current_pw&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'welcome'</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$new_pw&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'geelong'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_pconnect</span><span style="color: #007700">(</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$current_pw</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$dbase</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$c</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #DD0000">'code'</span><span style="color: #007700">]&nbsp;==&nbsp;</span><span style="color: #0000BB">28001</span><span style="color: #007700">)&nbsp;{&nbsp;</span><span style="color: #FF8000">//&nbsp;"ORA-28001:&nbsp;the&nbsp;password&nbsp;has&nbsp;expired"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Login&nbsp;and&nbsp;reset&nbsp;password&nbsp;at&nbsp;the&nbsp;same&nbsp;time<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$c&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_password_change</span><span style="color: #007700">(</span><span style="color: #0000BB">$dbase</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$user</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$current_pw</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$new_pw</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$c</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"New&nbsp;password&nbsp;is&nbsp;:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$new_pw&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /><br />if&nbsp;(!</span><span style="color: #0000BB">$c</span><span style="color: #007700">)&nbsp;{&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;The&nbsp;original&nbsp;error&nbsp;wasn't&nbsp;28001,&nbsp;or&nbsp;the&nbsp;password&nbsp;change&nbsp;failed<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$m&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">oci_error</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">trigger_error</span><span style="color: #007700">(</span><span style="color: #DD0000">'Could&nbsp;not&nbsp;connect&nbsp;to&nbsp;database:&nbsp;'</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$m</span><span style="color: #007700">[</span><span style="color: #DD0000">'message'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">E_USER_ERROR</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #FF8000">//&nbsp;Use&nbsp;the&nbsp;connection&nbsp;$c<br /></span><span style="color: #007700">...<br /><br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 notes" id="refsect1-function.oci-password-change-notes">
  <h3 class="title">Notes</h3>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    Changing the password either with this function or directly in
    Oracle should be done carefully.  This is because PHP applications
    may continue to successfully reuse persistent connections by
    authenticating with the old password.  The best practice is to
    restart all web servers whenever the user password is changed.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    If upgrading the Oracle client libraries or the database from a release prior to 11.2.0.3
    to version 11.2.0.3 or higher, <span class="function"><strong>oci_password_change()</strong></span> may give the
    error &quot;ORA-1017: invalid username/password&quot; unless both client and server versions are upgraded at
    the same time.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    The second <span class="function"><strong>oci_password_change()</strong></span> syntax is available
    since OCI8 version 1.1.
   </p>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <p class="para">
    In PHP versions before 5.0.0 you must use <span class="function"><strong>ocipasswordchange()</strong></span> instead.
    This name still can be used, it was left as alias of
    <span class="function"><strong>oci_password_change()</strong></span> for downwards compatability.
    This, however, is deprecated and not recommended.
   </p>
  </p></blockquote>

 </div>


</div></div></div></body></html>