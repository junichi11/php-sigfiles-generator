<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>match</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="control-structures.switch.html">« switch</a></li>
      <li style="float: right;"><a href="control-structures.declare.html">declare »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="language.control-structures.html">Control Structures</a></li>
    <li>match</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="control-structures.match" class="sect1">
 <h2 class="title">match</h2>
 <p class="verinfo">(PHP 8)</p>
 <p class="para">
  The <code class="literal">match</code> expression branches evaluation based on an
  identity check of a value.
  Similarly to a <code class="literal">switch</code> statement, a
  <code class="literal">match</code> expression has a subject expression that is
  compared against multiple alternatives. Unlike <code class="literal">switch</code>,
  it will evaluate to a value much like ternary expressions.
  Unlike <code class="literal">switch</code>, the comparison is an identity check
  (<code class="code">===</code>) rather than a weak equality check (<code class="code">==</code>).
  Match expressions are available as of PHP 8.0.0.
 </p>

 <div class="example" id="example-131">
  <p><strong>Example #1 Structure of a <code class="literal">match</code> expression</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$return_value </span><span style="color: #007700">= </span><span style="color: #0000BB">match </span><span style="color: #007700">(</span><span style="color: #0000BB">subject_expression</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">single_conditional_expression </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">return_expression</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">conditional_expression1</span><span style="color: #007700">, </span><span style="color: #0000BB">conditional_expression2 </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">return_expression</span><span style="color: #007700">,<br />};<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

  
   <div class="example" id="example-130">
   <p><strong>Example #2 Basic <code class="literal">match</code> usage</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$food </span><span style="color: #007700">= </span><span style="color: #DD0000">'cake'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$return_value </span><span style="color: #007700">= </span><span style="color: #0000BB">match </span><span style="color: #007700">(</span><span style="color: #0000BB">$food</span><span style="color: #007700">) {<br />    </span><span style="color: #DD0000">'apple' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'This food is an apple'</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">'bar' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'This food is a bar'</span><span style="color: #007700">,<br />    </span><span style="color: #DD0000">'cake' </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'This food is a cake'</span><span style="color: #007700">,<br />};<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$return_value</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

  <div class="example-contents"><p>The above example will output:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
string(19) &quot;This food is a cake&quot;
</pre></div>
   </div>
  </div>

  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    The result of a <code class="literal">match</code> expression does not need to be used.
   </span>
  </p></blockquote>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    A <code class="literal">match</code> expression <em class="emphasis">must</em> be
    terminated by a semicolon <code class="literal">;</code>.
   </span>
  </p></blockquote>
 </div>

 <p class="para">
  The <code class="literal">match</code> expression is similar to a
  <code class="literal">switch</code> statement but has some key differences:
  
  <ul class="itemizedlist">
   <li class="listitem">
    <span class="simpara">
     A <code class="literal">match</code> arm compares values strictly (<code class="code">===</code>) instead
     of loosely as the switch statement does.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     A <code class="literal">match</code> expression returns a value.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     <code class="literal">match</code> arms do not fall-through to later cases the way
     <code class="literal">switch</code> statements do.
    </span>
   </li>
   <li class="listitem">
    <span class="simpara">
     A <code class="literal">match</code> expression must be exhaustive.
    </span>
   </li>
  </ul>
 </p>

 <p class="para">
  As <code class="literal">switch</code> statements, <code class="literal">match</code>
  expressions are executed match arm by match arm.
  In the beginning, no code is executed.
  The conditional expressions are only evaluated if all previous conditional
  expressions failed to match the subject expression.
  Only the return expression corresponding to the matching conditional
  expression will be evaluated.
  For example:
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$result </span><span style="color: #007700">= </span><span style="color: #0000BB">match </span><span style="color: #007700">(</span><span style="color: #0000BB">$x</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">foo</span><span style="color: #007700">() =&gt; ...,<br />    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">bar</span><span style="color: #007700">() =&gt; ..., </span><span style="color: #FF8000">// $this-&gt;bar() isn't called if foo() === $x<br />    </span><span style="color: #0000BB">$this</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">baz </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">beep</span><span style="color: #007700">(), </span><span style="color: #FF8000">// beep() isn't called unless $x === $this-&gt;baz<br />    // etc.<br /></span><span style="color: #007700">};<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>

 <p class="para">
  <code class="literal">match</code> expression arms may contain multiple expressions
  separated by a comma.  That is a logical OR, and is a short-hand for multiple
  match arms with the same right-hand side.
 </p>
 <p class="para">
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$result </span><span style="color: #007700">= </span><span style="color: #0000BB">match </span><span style="color: #007700">(</span><span style="color: #0000BB">$x</span><span style="color: #007700">) {<br />    </span><span style="color: #FF8000">// This match arm:<br />    </span><span style="color: #0000BB">$a</span><span style="color: #007700">, </span><span style="color: #0000BB">$b</span><span style="color: #007700">, </span><span style="color: #0000BB">$c </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">5</span><span style="color: #007700">,<br />    </span><span style="color: #FF8000">// Is equivalent to these three match arms:<br />    </span><span style="color: #0000BB">$a </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">5</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">$b </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">5</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">$c </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">5</span><span style="color: #007700">,<br />};<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
 </p>
 <p class="para">
  A special case is the <code class="literal">default</code> pattern.
  This pattern matches anything that wasn&#039;t previously matched.
  For example:
  <div class="informalexample">
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$expressionResult </span><span style="color: #007700">= </span><span style="color: #0000BB">match </span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2 </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">foo</span><span style="color: #007700">(),<br />    </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4 </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">bar</span><span style="color: #007700">(),<br />    default =&gt; </span><span style="color: #0000BB">baz</span><span style="color: #007700">(),<br />};<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

  </div>
  <blockquote class="note"><p><strong class="note">Note</strong>: 
   <span class="simpara">
    Multiple default patterns will raise a
    <strong><code>E_FATAL_ERROR</code></strong> error.
   </span>
  </p></blockquote>
 </p>

 <p class="para">
  A <code class="literal">match</code> expression must be exhaustive.  If the
  subject expression is not handled by any match arm an
  <span class="classname"><a href="class.unhandledmatcherror.html" class="classname">UnhandledMatchError</a></span> is thrown.
 </p>

 <div class="example" id="example-132">
  <p><strong>Example #3 Example of an unhandled match expression</strong></p>
  <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$condition </span><span style="color: #007700">= </span><span style="color: #0000BB">5</span><span style="color: #007700">;<br /><br />try {<br />    </span><span style="color: #0000BB">match </span><span style="color: #007700">(</span><span style="color: #0000BB">$condition</span><span style="color: #007700">) {<br />        </span><span style="color: #0000BB">1</span><span style="color: #007700">, </span><span style="color: #0000BB">2 </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">foo</span><span style="color: #007700">(),<br />        </span><span style="color: #0000BB">3</span><span style="color: #007700">, </span><span style="color: #0000BB">4 </span><span style="color: #007700">=&gt; </span><span style="color: #0000BB">bar</span><span style="color: #007700">(),<br />    };<br />} catch (\</span><span style="color: #0000BB">UnhandledMatchError $e</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$e</span><span style="color: #007700">);<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
  </div>

  <div class="example-contents"><p>The above example will output:</p></div>
  <div class="example-contents screen">
<div class="cdata"><pre>
object(UnhandledMatchError)#1 (7) {
  [&quot;message&quot;:protected]=&gt;
  string(33) &quot;Unhandled match value of type int&quot;
  [&quot;string&quot;:&quot;Error&quot;:private]=&gt;
  string(0) &quot;&quot;
  [&quot;code&quot;:protected]=&gt;
  int(0)
  [&quot;file&quot;:protected]=&gt;
  string(9) &quot;/in/ICgGK&quot;
  [&quot;line&quot;:protected]=&gt;
  int(6)
  [&quot;trace&quot;:&quot;Error&quot;:private]=&gt;
  array(0) {
  }
  [&quot;previous&quot;:&quot;Error&quot;:private]=&gt;
  NULL
}
</pre></div>
  </div>
 </div>

 <div class="sect2">
  <h3 class="title">Using match expressions to handle non identity checks</h3>
  <p class="para">
   It is possible to use a <code class="literal">match</code> expression to handle
   non-identity conditional cases by using <code class="code">true</code> as the subject
   expression.
  </p>

  <div class="example" id="example-133">
   <p><strong>Example #4 Using a generalized match expressions to branch on integer ranges</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$age </span><span style="color: #007700">= </span><span style="color: #0000BB">23</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">match </span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">$age </span><span style="color: #007700">&gt;= </span><span style="color: #0000BB">65 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'senior'</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">$age </span><span style="color: #007700">&gt;= </span><span style="color: #0000BB">25 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'adult'</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">$age </span><span style="color: #007700">&gt;= </span><span style="color: #0000BB">18 </span><span style="color: #007700">=&gt; </span><span style="color: #DD0000">'young adult'</span><span style="color: #007700">,<br />    default =&gt; </span><span style="color: #DD0000">'kid'</span><span style="color: #007700">,<br />};<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>The above example will output:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
string(11) &quot;young adult&quot;
</pre></div>
   </div>
  </div>

  <div class="example" id="example-134">
   <p><strong>Example #5 Using a generalized match expressions to branch on string content</strong></p>
   <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$text </span><span style="color: #007700">= </span><span style="color: #DD0000">'Bienvenue chez nous'</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$result </span><span style="color: #007700">= </span><span style="color: #0000BB">match </span><span style="color: #007700">(</span><span style="color: #0000BB">true</span><span style="color: #007700">) {<br />    </span><span style="color: #0000BB">str_contains</span><span style="color: #007700">(</span><span style="color: #0000BB">$text</span><span style="color: #007700">, </span><span style="color: #DD0000">'Welcome'</span><span style="color: #007700">) || </span><span style="color: #0000BB">str_contains</span><span style="color: #007700">(</span><span style="color: #0000BB">$text</span><span style="color: #007700">, </span><span style="color: #DD0000">'Hello'</span><span style="color: #007700">) =&gt; </span><span style="color: #DD0000">'en'</span><span style="color: #007700">,<br />    </span><span style="color: #0000BB">str_contains</span><span style="color: #007700">(</span><span style="color: #0000BB">$text</span><span style="color: #007700">, </span><span style="color: #DD0000">'Bienvenue'</span><span style="color: #007700">) || </span><span style="color: #0000BB">str_contains</span><span style="color: #007700">(</span><span style="color: #0000BB">$text</span><span style="color: #007700">, </span><span style="color: #DD0000">'Bonjour'</span><span style="color: #007700">) =&gt; </span><span style="color: #DD0000">'fr'</span><span style="color: #007700">,<br />    </span><span style="color: #FF8000">// ...<br /></span><span style="color: #007700">};<br /><br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
   </div>

   <div class="example-contents"><p>The above example will output:</p></div>
   <div class="example-contents screen">
<div class="cdata"><pre>
string(2) &quot;fr&quot;
</pre></div>
   </div>
  </div>
 </div>
</div></div></div></body></html>