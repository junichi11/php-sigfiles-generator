<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title>Detect character encoding</title>
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-base.css" />
<link media="all" rel="stylesheet" type="text/css" href="styles/03e73060321a0a848018724a6c83de7f-theme-medium.css" />

 </head>
 <body class="docs"><div class="navbar navbar-fixed-top">
  <div class="navbar-inner clearfix">
    <ul class="nav" style="width: 100%">
      <li style="float: left;"><a href="function.mb-decode-numericentity.html">« mb_decode_numericentity</a></li>
      <li style="float: right;"><a href="function.mb-detect-order.html">mb_detect_order »</a></li>
    </ul>
  </div>
</div>
<div id="breadcrumbs" class="clearfix">
  <ul class="breadcrumbs-container">
    <li><a href="index.html">PHP Manual</a></li>
    <li><a href="ref.mbstring.html">Multibyte String Functions</a></li>
    <li>Detect character encoding</li>
  </ul>
</div>
<div id="layout">
  <div id="layout-content"><div id="function.mb-detect-encoding" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">mb_detect_encoding</h1>
  <p class="verinfo">(PHP 4 &gt;= 4.0.6, PHP 5, PHP 7, PHP 8)</p><p class="refpurpose"><span class="refname">mb_detect_encoding</span> &mdash; <span class="dc-title">Detect character encoding</span></p>

 </div>

 <div class="refsect1 description" id="refsect1-function.mb-detect-encoding-description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis dc-description">
   <span class="methodname"><strong>mb_detect_encoding</strong></span>(<span class="methodparam"><span class="type">string</span> <code class="parameter">$string</code></span>, <span class="methodparam"><span class="type"><span class="type">array</span>|<span class="type">string</span>|<span class="type">null</span></span> <code class="parameter">$encodings</code><span class="initializer"> = <strong><code>null</code></strong></span></span>, <span class="methodparam"><span class="type">bool</span> <code class="parameter">$strict</code><span class="initializer"> = <strong><code>false</code></strong></span></span>): <span class="type"><span class="type">string</span>|<span class="type"><span class="type false">false</span></span></span></div>

  <p class="para rdfs-comment">
   Detects the most likely character encoding for <span class="type">string</span> <code class="parameter">string</code>
   from an ordered list of candidates.
  </p>
  <p class="para">
   Automatic detection of the intended character encoding can never be entirely reliable;
   without some additional information, it is similar to decoding an encrypted string
   without the key. It is always preferable to use an indication of character encoding
   stored or transmitted with the data, such as a &quot;Content-Type&quot; HTTP header.
  </p>
  <p class="para">
   This function is most useful with multibyte encodings, where not all sequences of
   bytes form a valid string. If the input string contains such a sequence, that
   encoding will be rejected, and the next encoding checked.
  </p>
 </div>


 <div class="refsect1 parameters" id="refsect1-function.mb-detect-encoding-parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>
    
     <dt>
<code class="parameter">string</code></dt>

     <dd>

      <p class="para">
       The <span class="type">string</span> being inspected.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">encodings</code></dt>

     <dd>

      <p class="para">
       A list of character encodings to try, in order. The list may be specified as
       an array of strings, or a single string separated by commas.
      </p>
      <p class="para">
       If <code class="parameter">encodings</code> is omitted or <strong><code>null</code></strong>,
       the current detect_order (set with the <a href="mbstring.configuration.html#ini.mbstring.detect-order" class="link">
       mbstring.detect_order</a> configuration option, or <span class="function"><a href="function.mb-detect-order.html" class="function">mb_detect_order()</a></span>
       function) will be used.
      </p>
     </dd>

    
    
     <dt>
<code class="parameter">strict</code></dt>

     <dd>

      <p class="para">
       Controls the behaviour when <code class="parameter">string</code>
       is not valid in any of the listed <code class="parameter">encodings</code>.
       If <code class="parameter">strict</code> is set to <strong><code>false</code></strong>, the closest matching
       encoding will be returned; if <code class="parameter">strict</code> is set to <strong><code>true</code></strong>,
       <strong><code>false</code></strong> will be returned.
      </p>
      <p class="para">
       The default value for <code class="parameter">strict</code> can be set
       with the <a href="mbstring.configuration.html#ini.mbstring.strict-detection" class="link">
       mbstring.strict_detection</a> configuration option.
      </p>
     </dd>

    
   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues" id="refsect1-function.mb-detect-encoding-returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   The detected character encoding, or <strong><code>false</code></strong> if the string is not valid
   in any of the listed encodings.
  </p>
 </div>


 <div class="refsect1 examples" id="refsect1-function.mb-detect-encoding-examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example" id="example-2551">
    <p><strong>Example #1 <span class="function"><strong>mb_detect_encoding()</strong></span> example</strong></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Detect&nbsp;character&nbsp;encoding&nbsp;with&nbsp;current&nbsp;detect_order<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;"auto"&nbsp;is&nbsp;expanded&nbsp;according&nbsp;to&nbsp;mbstring.language<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"auto"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Specify&nbsp;"encodings"&nbsp;parameter&nbsp;by&nbsp;list&nbsp;separated&nbsp;by&nbsp;comma<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"JIS,&nbsp;eucjp-win,&nbsp;sjis-win"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Use&nbsp;array&nbsp;to&nbsp;specify&nbsp;"encodings"&nbsp;parameter<br /></span><span style="color: #0000BB">$encodings&nbsp;</span><span style="color: #007700">=&nbsp;[<br />&nbsp;&nbsp;</span><span style="color: #DD0000">"ASCII"</span><span style="color: #007700">,<br />&nbsp;&nbsp;</span><span style="color: #DD0000">"JIS"</span><span style="color: #007700">,<br />&nbsp;&nbsp;</span><span style="color: #DD0000">"EUC-JP"<br /></span><span style="color: #007700">];<br />echo&nbsp;</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$encodings</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
  <p class="para">
   <div class="example" id="example-2552">
    <p><strong>Example #2 Effect of <code class="parameter">strict</code> parameter</strong></p>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;'áéóú'&nbsp;encoded&nbsp;in&nbsp;ISO-8859-1<br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\xE1\xE9\xF3\xFA"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;string&nbsp;is&nbsp;not&nbsp;valid&nbsp;ASCII&nbsp;or&nbsp;UTF-8,&nbsp;but&nbsp;UTF-8&nbsp;is&nbsp;considered&nbsp;a&nbsp;closer&nbsp;match<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'ASCII'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'ASCII'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;If&nbsp;a&nbsp;valid&nbsp;encoding&nbsp;is&nbsp;found,&nbsp;the&nbsp;strict&nbsp;parameter&nbsp;does&nbsp;not&nbsp;change&nbsp;the&nbsp;result<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'ASCII'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">false</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'ASCII'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">],&nbsp;</span><span style="color: #0000BB">true</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
string(5) &quot;UTF-8&quot;
bool(false)
string(10) &quot;ISO-8859-1&quot;
string(10) &quot;ISO-8859-1&quot;
</pre></div>
    </div>
   </div>
  </p>
  <p class="para">
   In some cases, the same sequence of bytes may form a valid string in multiple
   character encodings, and it is impossible to know which interpretation was
   intended. For instance, among many others, the byte sequence &quot;\xC4\xA2&quot; could be:
  </p>
  <p class="para">
   <ul class="simplelist">
    <li class="member">
     &quot;Ä¢&quot; (U+00C4 LATIN CAPITAL LETTER A WITH DIAERESIS followed by U+00A2 CENT SIGN)
     encoded in any of ISO-8859-1, ISO-8859-15, or Windows-1252
    </li>
    <li class="member">
     &quot;ФЂ&quot; (U+0424 CYRILLIC CAPITAL LETTER EF followed by U+0402 CYRILLIC CAPITAL LETTER
     DJE) encoded in ISO-8859-5
    </li>
    <li class="member">
     &quot;Ģ&quot; (U+0122 LATIN CAPITAL LETTER G WITH CEDILLA) encoded in UTF-8
    </li>
   </ul>
  </p>
  <p class="para">
   <div class="example" id="example-2553">
    <p><strong>Example #3 Effect of order when multiple encodings match</strong></p>
    <div class="example-contents">
     <div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"\xC4\xA2"</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;The&nbsp;string&nbsp;is&nbsp;valid&nbsp;in&nbsp;all&nbsp;three&nbsp;encodings,&nbsp;so&nbsp;the&nbsp;first&nbsp;one&nbsp;listed&nbsp;will&nbsp;be&nbsp;returned<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ISO-8859-5'</span><span style="color: #007700">]));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ISO-8859-5'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">]));<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">mb_detect_encoding</span><span style="color: #007700">(</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;[</span><span style="color: #DD0000">'ISO-8859-5'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'UTF-8'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'ISO-8859-1'</span><span style="color: #007700">]));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents screen">
<div class="cdata"><pre>
string(5) &quot;UTF-8&quot;
string(10) &quot;ISO-8859-1&quot;
string(10) &quot;ISO-8859-5&quot;
</pre></div>
    </div>
   </div>
  </p>
 </div>


 <div class="refsect1 seealso" id="refsect1-function.mb-detect-encoding-seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><span class="function"><a href="function.mb-detect-order.html" class="function" rel="rdfs-seeAlso">mb_detect_order()</a> - Set/Get character encoding detection order</span></li>
   </ul>
  </p>
 </div>


</div></div></div></body></html>